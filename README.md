# Операционные системы UNIX/Linux (Базовые)

`// made by guerenmo // да пребудет с нами линукс` 

Установка и обновления системы Linux. Основы администрирования.

## Разделы
1. [Установка ОС](#part-1-установка-ос)  
2. [Создание пользователя](#part-2-создание-пользователя)  
3. [Настройка сети ОС](#part-3-настройка-сети-ос)   
4. [Обновление ОС](#part-4-обновление-ос)  
5. [Использование команды  sudo](#part-5-использование-команды-sudo)  
6. [Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)  
7. [Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов)  
8. [Установка и базовая настройка сервиса SSHD](#part-8-установка-и-базовая-настройка-сервиса-sshd)   
9. [Установка и использование утилит top, htop](#part-9-установка-и-использование-утилит-top-htop)   
10. [Использование утилиты fdisk](#part-10-использование-утилиты-fdisk)   
11. [Использование утилиты df](#part-11-использование-утилиты-df)    
12. [Использование утилиты du](#part-12-использование-утилиты-du)    
13. [Установка и использование утилиты ncdu](#part-13-установка-и-использование-утилиты-ncdu)    
14. [Работа с системными журналами](#part-14-работа-с-системными-журналами)     
15. [Использование планировщика заданий CRON](#part-15-использование-планировщика-заданий-cron)    

## Part 1. Установка ОС

* Установил Ubuntu 20.04 Server LTS без граф. интерфейса

    ![Список виртуальных машин](images/part1_0.png)
* Узнал версию Ubuntu через команду `cat /etc/issue`

    ![Версия виртуальной машины](images/part1_1.png)

## Part 2. Создание пользователя

* Создал нового пользователя `user1` и поместил его в группу `adm` с помощью команды `adduser` (в начале создал пользователя, потом добавил его через ту же команду с указанием группы `adm`)

    ![Создание нового пользователя](images/part2_1.png)

* Нашел информацию о новом пользователе `user1` в файле `/etc/passwd` в самом конце (воспользовался утилитой grep для упрощения поиска)

    ![Информация о новом пользователе](images/part2_2.png)

* Узнал находится ли пользователь `user1` в группе adm

    ![Группы пользователя user1](images/part2_3.png)

## Part 3. Настройка сети ОС

**Задай название машины вида user-1**

* Задал название машины именем `user-1`. Для этого изменил текущее значение `hostname` (имя нашей машины) в файлах `/etc/hostname` и `/etc/hosts`. Данный способ позволяет сохранить новое имя машины даже после перезагрузки.

* Отредактировал файл `/etc/hostname` с помощью текстового редактора `vi` - `sudo vi /etc/hostname`

    `// ps если интересно как: тык i, редактируем файл, тык esc, пишем :wq (w - сохранение, q - выход)`

    ![Содержание файла /etc/hostname](images/part3_1.png)
        
    Изменения в файле `/etc/hostname` сохранены

    ![Сохранение файла /etc/hostname](images/part3_2.png)

* Отредактировал файл `/etc/hosts` с помощью текстового редактора `vi` - `sudo vi /etc/hosts`

    ![Содержание файла /etc/hosts](images/part3_3.png)
* Изменения в файле `/etc/hosts` сохранены

    ![Сохранение файла /etc/hosts](images/part3_4.png)
* После перезагрузки проверил текущее название машины через команду `hostnamectl` без параметров

    ![Проверка названия машины](images/part3_5.png)

**Установи временную зону, соответствующую твоему текущему местоположению**

* Установил часовой пояс на `Европа/Москва`. Для этого задал символическую ссылку для файла `/etc/localtime` на файл часового пояса. Файлы с настройками часовых поясов хранятся в папке `/usr/share/zoneinfo` и разделены по часовым зонам

    ![Часовые зоны](images/part3_6.png)

    `// ps скрин был сделан после выполнения всей работы //`

* Символическую ссылку задал через команду `ln -sf /usr/share/zoneinfo/Europe/Moscow /etc/localtime` (опция `-s` создает символическую ссылку вместо жесткой, опция `-f` заменяет существующую ссылку на новую)

    ![Смена часового пояса](images/part3_7.png)
    
* Через команду `date` (скрин выше) и `timedatectl status` узнал о текущем часовом поясе. Теперь установлен московский часовой пояс

    ![Проверка установленного часового пояса](images/part3_8.png)

**Выведи названия сетевых интерфейсов с помощью консольной команды**

* В папке `/sys/class/net` хранятся файлы сетевых интерфейсов. Поэтому достаточно вывести информацию о содержимом папки с помощью команды `ls`, чтобы узнать названия сетевых интерфейсов

    ![Список сетевых интерфейсов](images/part3_9.png)

* Интерфейс `lo (loopback device)` представляет собой виртуальный сетевой интерфейс, который используется для отладки сетевых программ и запуска серверных приложений на локальной машине. Данный интерфейс присутствует в системе по умолчанию

* Интерфейс `enp0s3` является сетевым адаптером Ethernet, он позволяет компьютеру выйти в глобальную сеть

**Используя консольную команду, получи ip адрес устройства, на котором ты работаешь, от DHCP-сервера**

* Определил ip-адрес устройства с помощью команды `ip a`

    Команда `ip` позволяет просмотреть сетевые интерфейсы и их ip-адреса, опция `a` дает увидеть только сетевые адреса

    ![Вывод команды ip](images/part3_10.png)

    Для интерфейса **lo** установлен адрес `127.0.0.1`, для **enp0s3** - `10.0.2.15`

* DHCP-сервер - это сетевой протокол, который автоматически выдает ip-адреса и другие параметры сетевым устройствам для работы в сети TCP/IP, `то есть он занимается автоматической настройкой сетевых конфигураций устройств`.

**Определи и выведи на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw)**

* Вывел ip-адрес внешнего шлюза (публичный ip-адрес) с помощью команды `curl ifconfig.me`

    ![Внешний ip-адрес](images/part3_11.png)

    ip-адрес внешнего шлюза - `51.77.20.49`

* Вывел ip-адрес внутреннего шлюза (ip-адрес по умолчанию) с помощью команды `ip route | grep "default"`

    ![Внутренний ip-адрес](images/part3_12.png)

    ip-адрес внутреннего шлюза - `10.0.2.2`

**Задай статичные (заданные вручную, а не полученные от DHCP-сервера) настройки ip, gw, dns (используй публичный DNS-серверы, например 1.1.1.1 или 8.8.8.8)**

* Задал статичные настройки ip, gw, dns, отредактировав файл с конфигурацией сети `/etc/netplan/00-installer-config.yaml`

* Данный YAML файл содержит в себе перечисление сетевых интерфейсов и их параметров и представляет собой текстовый файл с строгим синтаксисом (отступы, пробелы или табуляция очень важны, иначе настройки будут некорректно записаны)

* Открыл файл `/etc/netplan/00-installer-config.yaml` с помощью редактора `vi`

    ![Netplan](images/part3_13.png)

* Здесь уже настроен сетевой интерфейс Ethernet и включен DHCP-сервер, который, как уже упоминалось, занимается автоматической настройкой сети на устройстве

* Включил режим редактирования, отключил DHCP-сервер и задал статичные настройки сети

    ![Netplan изменения](images/part3_14.png)

    * в поле `gateway4` указал ip-адрес шлюза по умолчанию `10.0.2.2`

    * в поле `addresses` указал ip-адрес `10.0.2.15/24` (ip-адрес интерфейса Ethernet)

    * в поле `nameservers` указал ip-адреса двух DNS-серверов - `8.8.8.8` и `1.1.1.1`
    
* Для применения настроек запустил команду `netplan` с опциями `generate` для проверки корректности заданных настроек и `apply` для запуска настроек

    ![Применение настроек Netplan](images/part3_15.png)

* После перезагрузки `// команда sudo reboot //` через команды `ip route show`, `ip addr show` и `hostname -I` (опция `-I` команды `hostname` выводит ip-адрес системы)

    ![Netplan изменения](images/part3_16.png)

    Команды вывели ip-адреса, которые указал ранее в файле Netplan

* Пропинговал удаленные хосты `1.1.1.1`, `8.8.8.8` и `ya.ru`

    ![Пинг хоста 8.8.8.8](images/part3_17.png)

    ![Пинг хоста ya.ru](images/part3_18.png)

    ![Пинг хоста 1.1.1.1](images/part3_19.png)

    В конце вывода всех команд отмечено `0% packet loss`, что говорит об успешном соединении (пакеты данных, отправленные командой `ping` дошли до целевого сервера и пришли обратно в полном порядке)

## Part 4. Обновление ОС

* Для обновления системных пакетов воспользовался командой `sudo apt upgrade`. После повторного использования команды выводит сообщение `0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded`. Данное сообщение говорит о том, что пакеты обновлены до последней версии

    ![Обновление ОС](images/part4_1.png)

## Part 5. Использование команды  sudo

* Добавил пользователя `user1` в группу `sudo` для того, чтобы он мог использовать одноименную команду. Использовал команду `usermod -aG sudo user1`

    ![sudo для user1](images/part5_1.png)

* Сочетание опций `-aG` позволяет добавить пользователя в дополнительную группу без удаления его из существующих

* Сменил пользователя с `guerenmo` на `user1` с помощью команды `su user1`

    ![Смена пользователя](images/part5_2.png)

* Изменил текущее имя машины (hostname) на `newuser-1` от лица пользователя `user1`

    ![Имя хоста](images/part5_3.png)

    ![Измененное имя хоста](images/part5_4.png)

* После перезагрузки настройки применились, новое имя хоста отображается в командной строке и через команду `hostname`

    ![Применение настроек со стороны user1](images/part5_5.png)

* Команда `sudo` позволяет выполнить любую команду от имени любого пользователя, обычно от имени суперпользователя (root), не выходя из-под своего пользователя

* Команда `su` позволяет переключиться на другого пользователя, без указания имени пользователя переключает на суперпользователя (root)

## Part 6. Установка и настройка службы времени

* Вывел время текущего часового пояса (в котором нахожусь, мск) с помощью команды `timedatectl`

    ![timedatectl](images/part6_1.png)

* Через эту же команду проверил настройку служб автоматической синхронизации времени (с опцией `show`)

    ![Применение настроек со стороны user1](images/part6_2.png)

    В данном случае служба синхронизации времени включена

* Для включения/выключения службы синхронизации времени с NTP-серверами можно воспользоваться командой `timedatectl set-ntp` со значением `true` или `false`

* NTP-серверы - серверы, которые обеспечивают синхронизацию времени на компьютерах и других устройствах через сеть, предоставляя более точное время

## Part 7. Установка и использование текстовых редакторов

**Cоздание файлов**

* Vim

    * Vim представляет собой мощный текстовый редактор. Он является улучшенной версией старого редактора `vi` и обладает множеством дополнительных функций
    
        Основные особенности Vim:

        * Работа в нескольких режимах (командный режим, редактирование, навигация по тексту)
        * Поддерживает плагины, скрипты и обширные возможности настройки через конфигурационные файлы
        * Возможности работы с текстом включают макросы, регулярные выражения, блоки кода, буферы и многоуровневую отмену действий.
    
    * Текстовый редактор Vim был установлен в системе по умолчанию

        ![Справка Vim](images/part7_1.png)

    * Создал текстовый файл `test_vim.txt` с помощью команды `vim test_vim.txt`

    * Изначально включен командный режим, в котором можно перемещаться по тексту и выполнять над ним действия с помощью клавиш и их комбинаций

    * Для входа в режим редактирования нажал `i`, после нажатия всплывает внизу сообщение `INSERT`

        ![Окно Vim](images/part7_2.png)

        В созданный файл записал свой ник - `guerenmo`

    * Для выхода из этого режима нажал `Esc`

    * Для сохранения результата ввёл `:wq` и `Enter` (команда `w` позволяет сохранить файл, а команда `q` выйти из редактора)

* nano

    * nano довольно простой текстовый редактор, обладающий интуитивным и минималистичным интерфейсов. Обладает стандартными инструментами копирования, вставки, поиска и замены текста, работу с файлами и т.п.
    
        Основные команды отображаются внизу и запускаются комбинациями клавиш (ctrl, shift и буквы)
    
    * Текстовый редактор nano был установлен в системе по умолчанию

        ![Версия nano](images/part7_3.png)

    * Создал текстовый файл `test_nano.txt` с помощью команды `nano test_nano.txt`

    * Файл можно редактировать сразу после запуска редактора

        ![Окно nano](images/part7_4.png)

        В созданный файл записал свой ник - `guerenmo`

    * Для сохранения результата нажал `Ctrl` + `O` и `Enter`, далее для выхода из редактора нажал `Ctrl` + `X`

* mcedit

    * mcedit - это текстовый редактор, встроенный в Midnight Commander (mc), популярный файловый менеджер для Unix-подобных систем. mcedit является удобным и функциональным редактором, который сочетает простоту использования с достаточно мощными возможностями редактирования.
    
    * Текстовый редактор mcedit не был установлен изначально

        ![Отсутствие редактора mcedit](images/part7_5.png)

    * Перед установкой редактора необходимо обновить программные пакеты

        ![Обновление пакетов](images/part7_6.png)

    * После обновления установил редактор mcedit с помощью команды `sudo apt install mcedit`

        ![Версия mcedit](images/part7_7.png)

    * Создал текстовый файл `test_mcedit.txt` с помощью команды `mcedit test_mcedit.txt`

    * Файл можно редактировать сразу после запуска редактора

        ![Окно mcedit](images/part7_8.png)

        В созданный файл записал свой ник - `guerenmo`

    * Для сохранения результата нажал `F2` и `Enter` для подтверждения операции

    * Для выхода из редактора нажал `F10`

    * В конце всех операций можно увидеть созданные файлы и их содержимое

        ![Содержимое файлов](images/part7_9.png)

**Редактирование файлов**

* Vim

    * Открыл файл `test_vim.txt` с помощью команды `vim test_vim.txt`

    * Вошел в режим редактирования (нажал `i`) и поменял содержимое файла на `21 School 21`

        ![Окно Vim_редактирование](images/part7_10.png)

    * Для выхода из этого режима нажал `Esc`

    * Для сохранения результата без сохранения ввёл `:q!` (команда `!` позволяет принудительно выполнить команду)

* nano

    * Открыл текстовый файл `test_nano.txt` с помощью команды `nano test_nano.txt`

    * После открытия редактора сразу же поменял содержимое файла на `21 School 21`

        ![Окно nano_редактирование](images/part7_11.png)

    * Нажал `Ctrl` + `X` для выхода из редактора и `N` на сообщение `"Save modified buffer?"`

* mcedit

    * Открыл текстовый файл `test_mcedit.txt` с помощью команды `mcedit test_mcedit.txt`

    * После открытия редактора сразу же поменял содержимое файла на `21 School 21`

        ![Окно mcedit_редактирование](images/part7_12.png)

    * Для выхода из редактора нажал `F10`, выбрал `No` и нажал `Enter` на сообщение `"File /home/guerenmo/test_mcedit.txt was modified. Save before close?"`

    * В конце всех операций можно увидеть содержимое файлов, текст остался прежним

        ![Содержимое test_vim.txt_редакт](images/part7_13.png)

        ![Содержимое test_nano.txt_редакт](images/part7_14.png)

        ![Содержимое test_mcedit.txt_редакт](images/part7_15.png)

**Поиск и замена слов**

* Vim

    * Открыл файл `test_vim.txt` с помощью команды `vim test_vim.txt`

    * Вошел в режим редактирования (нажал `i`) и поменял содержимое файла на `21 School 21`

    * Для выхода из этого режима нажал `Esc`

    * Для поиска ввёл `/<слово>`, в данном случае `/21`, и `Enter`

        ![Поиск test_vim.txt](images/part7_16.png)

    * Редактор подсвечивает вхождение слова в тексте и указывает его начало в правом нижнем углу (редактор нашел два вхождения `21` в местах 1.1 и 1.11). Дальнейшее переключение между результатами посика производится вводом `n` (следующее значение) и `Shift` + `n` (предыдущее значение)

        ![Результаты поиска test_vim.txt](images/part7_17.png)

    * Для замены подстроки во всем файле на другую подстроку в командном режиме ввёл `%s/текущее значение подстроки/новое значение/g` (`%s` - выполнить замену во всем файле, `g` - замена всех совпадений)

        ![Замена слов test_vim.txt](images/part7_18.png)

    * В данном случае заменил подстроку `21` на `twenty one <3`

* nano

    * Открыл файл `test_nano.txt` с помощью команды `nano test_nano.txt`

    * Поменял содержимое файла на `21 School 21`

    * Для поиска использовал команду `Ctrl` + `W`. Внизу появится окно `Search:`, в которой нужно ввести подстроку для поиска и нажать `Enter`. Для поиска следующего вхождения данного выражения используется сочетание клавиш `Alt` + `W`. Для поиска предыдущего - `Alt` + `Q`. Результат поиска подстроки '21'

        ![Поиск test_nano.txt](images/part7_19.png)

    * Для замены подстроки во всем файле на другую подстроку нажал `Ctrl` + `\`. Внизу экрана появится окно `Search (to replace)`, в котором нужно ввести подстроку для поиска и нажать `Enter`. Далее появится окно `Replace with`, в котором нужно ввести подстроку для замены и нажать `Enter`. Система подсвечивает вхождение и спрашивает `Replace this instatnce?` (Y - yes, N - no (при выборе этого варианта переходит к следующему вхождению), A - all (замена всех вхождений), ^С - cancel)
    
    * Результат замены:

        ![Замена слов test_nano.txt](images/part7_20.png)

    * В данном случае заменил подстроку `21` на `twenty one <3`

* mcedit

    * Открыл файл `test_mcedit.txt` с помощью команды `nano test_mcedit.txt`

    * Поменял содержимое файла на `21 School 21`

    * Для поиска использовал команду `F7`. Появится окно, в котором нужно ввести подстроку для поиска. Можно настроить поиск (использовать регулярные выражения, игнорировать регистр и т.д.)

        ![Поиск test_mcedit.txt](images/part7_21.png)
    
    * Далее нужно выбрать `OK` для поиска первого вхождения или `Find all` для подсвечивания всех вхождений

        ![Результат поиска test_mcedit.txt](images/part7_22.png)

    * Для поиска следующего значения нужно нажать `F7` + `Enter`

        ![Переключение вхождений test_mcedit.txt](images/part7_23.png)

    * Для замены подстроки во всем файле на другую подстроку нажал `F4`. Появится окно, в котором нужно ввести подстроку для поиска и подстроку для замены. Доступна настройка поиска

        ![Окно замены test_mcedit.txt](images/part7_24.png)

    * Далее будет появляться окно с подтверждением каждой замены подстроки. Можно выбрать `All` для замены всех вхождений сразу. Также можно контроллировать процесс замены - какие-то вхождения оставить, выбрав `Skip`

        ![Замена слов test_mcedit.txt](images/part7_25.png)

    * В файле успешно заменена подстрока `21` на `twenty one <3`

        ![Результат замены test_mcedit.txt](images/part7_26.png)

## Part 8. Установка и базовая настройка сервиса SSHD

* `SSHd` (Secure Shell Daemon) — это служба в Unix-подобных системах, которая реализует протокол SSH (Secure Shell). Основная функция sshd — обеспечить безопасный удалённый доступ к серверу, позволяя пользователям подключаться и выполнять команды на удалённой машине. sshd отвечает за управление входящими SSH-соединениями и предоставление средств для безопасной аутентификации

* Перед установкой сервиса SSHD обновил программные пакеты командой `sudo apt update`

    ![Обновление пакетов командой update](images/part8_1.png)

* Установил пакет OpenSSH Server командой `sudo apt install openssh-server`

* Проверил работает ли служба командой `sudo systemctl status ssh`

    ![Служба SSHd](images/part8_2.png)

* Добавил автостарт службы при запуске системы командой `sudo systemctl enable ssh`

    ![Автостарт службы SSHd](images/part8_3.png)

* Открыл файл конфигурации SSHD в редакторе vim `sudo vim /etc/ssh/sshd_config`

    ![Файл конфигурации службы SSHD](images/part8_4.png)

* Нашел строку с `#Port 22` и заменил на `Port 2022` (без знака `#`)

    ![Установка порта 2022](images/part8_5.png)

* С помощью команды `ps aux | grep sshd` смог найти наличие процесса sshd. Команда `ps` используется для отображения информации о запущенных процессах

    ![Вывод команды ps aux](images/part8_6.png)

    С этой командой используются следующие ключи:

    * `a` - показать процесссы всех пользователей
    * `u` - показать процессы с деталями, такими как пользователь, под которым запущен процесс, и используемая память
    * `x` - показать процессы, не привязанные к терминалу (демоны и службы)

* Перезагрузил систему

* Вывел список активных соединений командой `netstat -tan`

    ![Вывод команды netstat -tan](images/part8_7.png)

Kоманда `netstat` с ключем `-tan` выводит список всех активных сетевых соединений на компьютере, а также прослушивающих портов и состояний соединений. Этот ключ включает в себя три отдельных ключа:

* `-t` – указывает netstat отобразить только TCP-соединения
* `-a` – указывает netstat отобразить все соединения и прослушиваемые порты
* `-n` – указывает netstat отобразить числовые значения портов и ip-адресов вместо их символьных имен

Значение столбцов в выводе команды netstat -tan:
* `Proto` – протокол, который используется для соединения
* `Recv-Q` – длина очереди приема байтов для соединения (если равно 0, то очереди нет, и приложение успешно обрабатывает полученные данные)
* `Send-Q` – длина очереди отправки байтов для соединения
* `Local Address` – локальный ip-адрес и порт
* `Foreign Address` – внешний ip-адрес и порт (удаленный хост)
* `State` – Состояние соединения. Это может быть `LISTEN` (порт активен и готов принимать входящие соединения от удаленных устройств), `ESTABLISHED` (соединение между локальным и удаленным узлом установлено и активно, теперь между ними может происходить обмен данными), `CLOSE_WAIT` (локальный сокет завершил откправку данных и теперь ждет подтверждения о закрытии соединения от удаленного узла) и другие

В контексте команды netstat -tan, если 0.0.0.0 появляется в столбце Local Address, это означает, что порт прослушивается на всех сетевых интерфейсах устройства (доступен для всех устройств, подключенных к сети, или для любого клиента в интернете, если устройство имеет публичный ip-адрес). Если 0.0.0.0 появляется в столбце Foreign Address, это означает, что соединение может быть установлено с любого IP-адреса.

## Part 9. Установка и использование утилит top, htop

Команды `top` и `htop` – инструменты мониторинга производительности – позволяют просматривать информацию о текущем использовании системных ресурсов и запущенных процессах.

* Команды `top` и `htop` были установлены в системе изначально

* Вывод команды `top`

    ![Вывод команды top](images/part9_1.png)

* Значения полей в таблице процессов

    * `PID` - идентификатор процесса
    * `USER` - пользователь, запустивший процесс
    * `PR` - приоритет процесса
    * `NI` - измененный приоритет (присвоенный пользователем с помощью команды nice)
    * `VIRT`- объем используемой виртуальной памяти (здесь выводится тот объем памяти, который был запрошен процессом, даже если фактически используется меньше)
    * `RES` - объем используемой оперативной памяти
    * `SHR` - объем памяти, разделяемой с другими процессами (т.е.  память, которая может быть использована другими процессами)
    * `S` - статус процесса 
        * `R` - running - запущен 
        * `S`- sleeping - в ожидании
        * `Z` - zombie - процесс-«зомби» (завершен, но запись о процессе осталась)
        * `D` - uninterruptible sleep - в состоянии сна
        * `T` - stopped - остановлен
        * `I` - idle - простой (не выполняет никаких задач)
    * `%CPU` - процент использования процессорного времени
    * `%MEM` - процент использования оперативной памяти
    * `TIME+` - общее время работы процесса
    * `COMMAND` - имя процесса (команда, которой был запущен процесс)

* `uptime` - 4 минуты (прошедшее время с последней загрузки системы)
* `количество авторизованных пользователей` - 1 пользователь
* `количество авторизованных пользователей` - 1 user 
* `общая загрузка системы` - 0.01, 0.07, 0.03 (load average – среднее количество процесоов, ожидающих доступа к ЦП в течение последних 1, 5 и 15 минут)
* `общее количество процессов`: 131 (Tasks total)
* `загрузка cpu`
    * 0.0 us: 0.0% времени процессора занято пользовательскими процессами
    * 0.1 sy: 0.1% времени процессора занято системными процессами
    * 0.0 ni: 0.0% времени процессора занято процессами с приоритетом ниже нормального
    * 99.9 id: 99.9% времени процессора простаивает, т.е. не используется
    * 0.0 wa: 0.0% времени процессора ждет ввода-вывода.
    * 0.0 hi: 0.0% времени процессора ждет обработки аппаратных прерываний
    * 0.0 si: 0.0% времени процессора ждет обработки программных прерываний
    * 0.0 st: 0.0% времени процессора занято виртуализацией
* `загрузка памяти (MiB Mem)` - общий объем оперативной памяти составляет 5929.5 мегабайт, из которых:
    * 5510.9 мегабайт свободны
    * 171.2 мегабайт используются
    * 247.3 мегабайт используются для буферизации и кэширования
* `pid процесса занимающего больше всего памяти` - 736
        (для сортировки процессов по использованию памяти воспользовался командой `Shift` + `M`)

    ![Сортировка процессов по %MEM](images/part9_2.png)

* `pid процесса, занимающего больше всего процессорного времени` - 427 
        (для сортировки процессов по занимаемому процессорному времени воспользовался командой `Shift` + `P`)

    ![Сортировка процессов по %CPU](images/part9_3.png)

* для выхода нажал `q`

* Вывод команды `htop`

    ![Вывод команды htop](images/part9_4.png)

* Для сортировки процессов нажал `F6` и переключился на нужное поле сортировки, затем нажал `ENTER`

* Сортировка процессов по полю `PID`

    ![Сортировка процессов по полю PID](images/part9_5.png)

* Сортировка процессов по полю `PERCENT_CPU` (`CPU%`)

    ![Сортировка процессов по полю PERCENT_CPU](images/part9_6.png)

* Сортировка процессов по полю `PERCENT_MEM` (`MEM%`)

    ![Сортировка процессов по полю PERCENT_MEM](images/part9_7.png)

* Сортировка процессов по полю `TIME`

    ![Сортировка процессов по полю TIME](images/part9_8.png)

* Отфильтрованный вывод команды `htop` для процесса `sshd` (нажал на `F4`, ввёл в поле `sshd` и нажал `Enter`)

    ![Фильтр по процессу sshd в команде htop](images/part9_9.png)

* Для вывода процессов `syslog` нажал `F3` для отображения строки поиска и ввёл `syslog` + `ENTER`, система нашла и выделила процесс (если такой процесс запущен в системе)

    ![Вывод процессов syslog](images/part9_10.png)

`syslog` собирает сообщения от различных компонентов системы (ошибки, предупреждения, информационные сообщения и отладочную информацию) и записывает их в лог-файлы 

* Для добавления вывода полей `hostname`, `clock` и `uptime` нажал `F2` для перехода в меню настройки конфигурации. Далее перешел в раздел `Setup` -> `Meters` -> `Available meters`, по очереди выбирал поля, нажимал `Enter` и стрелками перевожу в `Left column` / `Right column`. В `Left column` перечислены поля, которые отображаются в левой части экрана, в `Right column` соответственно в правой части экрана

    ![Настройка отображения команды htop](images/part9_11.png)

* Установил `hostname`, `clock` и `uptime`в правой части экрана

    ![Вывод команды htop с добавленным выводом hostname, clock и uptime](images/part9_12.png)

* Для удаления поля из вывода нужно нажать `Del`, для выхода из меню настройки нажать `F10`

## Part 10. Использование утилиты fdisk

Утилита `fdisk` позволяет создавать, изменять, удалять и просматривать разделы на дисках

* Запустил команду `fdisk -l`
    * Название жесткого диска: `/dev/sda`
    * Размер жесткого диска: 25 ГБ
    * Количество секторов: 52428800
    * swap-раздел (используется для хранения данных, которые не умещаются в оперативной памяти) отсутствует (отображался бы с ID `82` и указан как `Linux swap / Solaris`)

    ![Вывод команды fdisk](images/part10_1.png)

## Part 11. Использование утилиты df

Утилита `df` (disk free) используется для вывода инфо о доступном месте на файловых системах – размер файловой системы, использованное пространство и т.д.

- Вывод команды `df` (корневой раздел - `/dev/mapper/ubuntu--vg-ubuntu--lv`)

    ![Вывод команды df](images/part11_1.png)
    * Размер раздела: 11758760 килобайт
    * Размер занятого пространства: 2803408 килобайт
    * Размер свободного пространства: 8336244 килобайт
    * Использовано 26%
    * Единица измерения памяти по умолчанию указана в килобайтах

- Вывод команды `df -Th`

    ![Вывод команды df -Th](images/part11_2.png)
    * Размер раздела: 12 Гб
    * Размер занятого пространства: 2.7 Гб
    * Размер свободного пространства: 8.0 Гб
    * Использовано 26%
    * Тип файловой системы: ext4
    * Опция `-T` отображает тип файловой системы
    * Опция `-h` отображает размеры в удобном формате (Кб, Мб, Гб и т.д.)

## Part 12. Использование утилиты du

Утилита `du` (disk usage) предназначена для оценки использования дискового пространства файлами и директориями

* Вывод команды `du`
    
    ![Вывод команды du](images/part12_1.png)

* Вывод размера папки /home (в байтах, в человекочитаемом виде)

    * Использовал команду `du -hs /home` для вывода в человекочитаемом виде
        
        ![Вывод размера папки /home (в байтах, в человекочитаемом виде)](images/part12_2.png)

    * Использовал команду `du -bs /home` для вывода в байтах
        
        ![Вывод размера папки /home (в байтах, в человекочитаемом виде)](images/part12_3.png)

* Вывод размера папки /var (в байтах, в человекочитаемом виде)

    * Использовал команду `du -hs /var` для вывода в человекочитаемом виде
        
        ![Вывод размера папки /home (в байтах, в человекочитаемом виде)](images/part12_4.png)

    * Использовал команду `du -bs /var` для вывода в байтах
        
        ![Вывод размера папки /home (в байтах, в человекочитаемом виде)](images/part12_5.png)

* Вывод размера папки /var/log (в байтах, в человекочитаемом виде)

    * Использовал команду `du -hs /var/log` для вывода в человекочитаемом виде
        
        ![Вывод размера папки /home (в байтах, в человекочитаемом виде)](images/part12_6.png)

    * Использовал команду `du -bs /var/log` для вывода в байтах
        
        ![Вывод размера папки /home (в байтах, в человекочитаемом виде)](images/part12_7.png)

* `-h` выводит в человекочитаемом формате
* `-s` выводит только суммарный размер каждой указанной директории
* `-b` выводит размер в байтах

* Вывод размера каждого вложенного элемента в /var/log: 

    * Использовал `du -h /var/log/*` для вывода размера каждого элемента в человекочитаемом виде

        ![Вывод размера каждого элемента /var/log/*](images/part12_8.png)

## Part 13. Установка и использование утилиты ncdu

`ncdu` – это интерактивная командная утилита для анализа использования дискового пространства (позволяет быстро и удобно исследовать структуру каталогов и файлов на диске, оценить размер каждого элемента и удалить ненужные файлы прямо из интерфейса)

* Аналогично с [Part 12](#part-12-использование-утилиты-du) проанализировал дисковое пространство

* В начале обновил пакеты командой `sudo apt update` и установил утилиту `ncdu` командой `sudo apt install ncdu`

    ![Установка ncdu](images/part13_1.png)

* Вывод размера папки /home командой `ncdu /home` (общий размер папки указывается внизу - `Total disk usage`)

    ![Вывод ncdu /home](images/part13_2.png)

* Вывод размера папки /var командой `ncdu /var`

    ![Вывод ncdu /var](images/part13_3.png)

* Вывод размера папки /var/log командой `ncdu /var/log`

    ![Вывод ncdu /var/log](images/part13_4.png)

* Размеры папок, выведенных командой `ncdu`, совпадают с размерами папок, выведенными командой `du` из [Part 12](#part-12-использование-утилиты-du)

## Part 14. Работа с системными журналами

Системные журналы `logs` записывают различные события и сообщения, которые происходят в операционной системе (запуск и остановка сервисов, ошибки, предупреждения и пр. важные события)

* Часть файла `/var/log/dmesg` - содержит содержит сообщения, полученные от ядра. Регистрирует много сообщений еще на этапе загрузки, в них отображается информация об аппаратных устройствах, которые инициализируются в процессе загрузки

    ![Вывод cat /var/log/dmesg](images/part14_1.png)

* Часть файла `/var/log/syslog` - Содержит общие системные сообщения, включая информацию от различных системных служб и демонов

    ![Вывод cat /var/log/syslog](images/part14_2.png)

* Часть файла `/var/log/auth.log` - содержит информацию об авторизации пользователей в системе, включая пользовательские логины и механизмы аутентификации, которые были использованы

    ![Вывод cat /var/log/auth.log](images/part14_3.png)

* Время последней успешной авторизации 27 Августа 14:26:23, имя пользователя `guerenmo`, вход был совершен по логину `systemd-logind` (`uid=0` значит, что пользователь имеет права суперпользователя):

* Перезапустил службу SSHd командой `sudo systemctl restart ssh`

* Часть файла `var/log/auth.log` с сообщениями о перезапуске службы SSHd:
![Часть вывода файла var/log/auth.log с сообщениями о перезапуске службы SSHd](images/part14_4.png)

## Part 15. Использование планировщика заданий CRON

`CRON` - это системный планировщик задач, который позволяет выполнять заданные команды или скрипты автоматически в заданное время или с интервалом

* Для создания задачи в планировщике CRON открыл файл настройки cron-задач с помощью команды `ctrontab -e` (откроется текстовый редактор по умолчанию). В открывшемся файле добавил строку с периодичностью исполнения и путем к исполняемой команде - `*/2 * * * * uptime`
    * `*/2` – задача будет запускаться каждые 2 минуты
    * `* * * *` - задача будет выполняться в любое время, каждый день, каждый месяц и каждый день недели
    * `uptime` - команда, которую нужно выполнить

    ![Содержание файла настройки cron-задач](images/part15_1.png)

* Вывод части содержания файла `/var/log/syslog`, в котором записаны строчки о выполнении команды `uptime`
    
    ![часть содержания файла `/var/log/syslog`, в котором записаны строчки о выполнении команды uptime](images/part15_2.png)

    В журнале отражаются три записи выполнения команды каждые две минуты
* Вывел текущий список cron-задач командой `crontab -l`

    ![Текущий список cron-задач ](images/part15_3.png)

* Удалил все задания из планировщика заданий командой `crontab -r` и вывел список текущих cron-задач

    ![Удаление задач из CRON](images/part15_4.png)

**неужели я закончил...**

чувствую себя примерно так:

![уставший кот](meme/meme1.jpg)
